<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🌈 Spelling Adventure for Kids! 🎮</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Comic Neue', cursive;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 30px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #667eea;
            text-align: center;
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .progress-bar {
            background: #e0e0e0;
            border-radius: 20px;
            height: 30px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            gap: 20px;
        }

        .stat-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 15px 25px;
            border-radius: 15px;
            color: white;
            text-align: center;
            flex: 1;
        }

        .stat-box h3 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-box p {
            font-size: 0.9em;
        }

        .game-area {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            text-align: center;
        }

        .word-display {
            font-size: 3em;
            color: #333;
            margin-bottom: 30px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 8px;
        }

        .word-image {
            font-size: 5em;
            margin-bottom: 20px;
        }

        .letter-input {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .letter-box {
            width: 60px;
            height: 60px;
            font-size: 2em;
            text-align: center;
            border: 3px solid #667eea;
            border-radius: 10px;
            background: white;
            text-transform: uppercase;
            font-weight: bold;
            color: #333;
        }

        .letter-box:focus {
            outline: none;
            border-color: #f5576c;
            box-shadow: 0 0 15px rgba(245, 87, 108, 0.5);
        }

        .letter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .letter-btn {
            width: 50px;
            height: 50px;
            font-size: 1.5em;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s, opacity 0.3s;
        }

        .letter-btn:hover:not(:disabled) {
            transform: scale(1.1);
        }

        .letter-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .control-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
            font-family: inherit;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            color: #333;
        }

        .feedback {
            font-size: 2em;
            margin: 20px 0;
            min-height: 50px;
            font-weight: bold;
        }

        .feedback.correct {
            color: #4caf50;
            animation: bounce 0.5s;
        }

        .feedback.incorrect {
            color: #f44336;
            animation: shake 0.5s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #f0f;
            animation: fall 3s linear;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .start-screen {
            text-align: center;
        }

        .start-screen h2 {
            color: #667eea;
            font-size: 2em;
            margin: 30px 0;
        }

        .mode-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 30px 0;
        }

        .mode-btn {
            padding: 30px 50px;
            font-size: 1.8em;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-family: inherit;
            transition: transform 0.2s;
        }

        .mode-btn:hover {
            transform: scale(1.1);
        }

        .mode-single {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .mode-two {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .player-scores {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin: 20px 0;
        }

        .player-card {
            flex: 1;
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            transition: all 0.3s;
        }

        .player-card.active {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(0,0,0,0.3);
        }

        .player-card.charlie {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .player-card.grayson {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .player-card h2 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .player-card .player-score {
            font-size: 3em;
            font-weight: bold;
            margin: 10px 0;
        }

        .player-card .player-words {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .turn-indicator {
            font-size: 2em;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            color: #667eea;
        }

        .game-over {
            text-align: center;
            padding: 40px;
        }

        .game-over h2 {
            font-size: 3em;
            margin-bottom: 20px;
            color: #667eea;
        }

        .game-over .winner {
            font-size: 5em;
            margin: 20px 0;
        }

        .game-over .final-scores {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin: 30px 0;
        }

        .game-over .final-score-card {
            padding: 30px;
            border-radius: 20px;
            min-width: 200px;
        }

        .difficulty-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 30px 0;
        }

        .difficulty-btn {
            padding: 20px 40px;
            font-size: 1.5em;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            font-family: inherit;
            transition: transform 0.2s;
        }

        .difficulty-btn:hover {
            transform: scale(1.1);
        }

        .difficulty-easy {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            color: #333;
        }

        .difficulty-medium {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            color: white;
        }

        .difficulty-hard {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .hidden {
            display: none;
        }

        .home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            border: 3px solid #667eea;
            border-radius: 25px;
            padding: 12px 24px;
            font-size: 1.3rem;
            font-weight: bold;
            color: #667eea;
            text-decoration: none;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .home-button:hover {
            transform: scale(1.05);
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <a href="index.html" class="home-button">🏠 Home</a>

    <div class="container">
        <h1>🌈 Spelling Adventure! 🎮</h1>

        <div id="modeScreen" class="start-screen">
            <h2>Choose Game Mode!</h2>
            <div class="mode-buttons">
                <button class="mode-btn mode-single" onclick="chooseMode('single')">
                    👤 Single Player
                </button>
                <button class="mode-btn mode-two" onclick="chooseMode('two')">
                    👥 Two Players<br><small>Charlie vs Grayson!</small>
                </button>
            </div>
        </div>

        <div id="startScreen" class="start-screen hidden">
            <h2>Choose Your Level!</h2>
            <div class="difficulty-buttons">
                <button class="difficulty-btn difficulty-easy" onclick="startGame('easy')">
                    🌟 Easy<br><small>3-4 letters</small>
                </button>
                <button class="difficulty-btn difficulty-medium" onclick="startGame('medium')">
                    ⭐ Medium<br><small>5-6 letters</small>
                </button>
                <button class="difficulty-btn difficulty-hard" onclick="startGame('hard')">
                    💫 Hard<br><small>7-8 letters</small>
                </button>
            </div>
        </div>

        <div id="gameScreen" class="hidden">
            <div id="singlePlayerStats" class="stats">
                <div class="stat-box">
                    <h3 id="score">0</h3>
                    <p>Score</p>
                </div>
                <div class="stat-box">
                    <h3 id="streak">0</h3>
                    <p>Streak 🔥</p>
                </div>
                <div class="stat-box">
                    <h3 id="level">1</h3>
                    <p>Level</p>
                </div>
            </div>

            <div id="twoPlayerStats" class="player-scores hidden">
                <div class="player-card charlie" id="charlieCard">
                    <h2>🦸 Charlie</h2>
                    <div class="player-score" id="charlieScore">0</div>
                    <div class="player-words"><span id="charlieWords">0</span> words</div>
                </div>
                <div class="player-card grayson" id="graysonCard">
                    <h2>🚀 Grayson</h2>
                    <div class="player-score" id="graysonScore">0</div>
                    <div class="player-words"><span id="graysonWords">0</span> words</div>
                </div>
            </div>

            <div id="turnIndicator" class="turn-indicator hidden">Charlie's Turn!</div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill">0/10</div>
            </div>

            <div class="game-area">
                <div class="word-image" id="wordImage">🐱</div>
                <div class="word-display" id="wordDisplay">Spell the word!</div>

                <div class="letter-input" id="letterInput"></div>

                <div class="letter-buttons" id="letterButtons"></div>

                <div class="feedback" id="feedback"></div>

                <div class="control-buttons">
                    <button class="btn btn-primary" onclick="speak()">🔊 Hear Word</button>
                    <button class="btn btn-secondary" onclick="checkAnswer()">✓ Check</button>
                    <button class="btn btn-success hidden" id="nextBtn" onclick="nextWord()">Next Word →</button>
                </div>
            </div>

            <div class="control-buttons">
                <button class="btn btn-secondary" onclick="resetGame()">🔄 New Game</button>
            </div>
        </div>

        <div id="gameOverScreen" class="hidden game-over">
            <h2>Game Over!</h2>
            <div class="winner" id="winnerDisplay">🏆</div>
            <div class="final-scores">
                <div class="final-score-card charlie">
                    <h2>🦸 Charlie</h2>
                    <div class="player-score" id="charlieFinalScore">0</div>
                    <div class="player-words"><span id="charlieFinalWords">0</span> words</div>
                </div>
                <div class="final-score-card grayson">
                    <h2>🚀 Grayson</h2>
                    <div class="player-score" id="graysonFinalScore">0</div>
                    <div class="player-words"><span id="graysonFinalWords">0</span> words</div>
                </div>
            </div>
            <button class="btn btn-primary" onclick="resetGame()">Play Again!</button>
        </div>
    </div>

    <div class="celebration" id="celebration"></div>

    <script>
        const wordLists = {
            easy: [
                { word: 'cat', emoji: '🐱' },
                { word: 'dog', emoji: '🐕' },
                { word: 'sun', emoji: '☀️' },
                { word: 'star', emoji: '⭐' },
                { word: 'fish', emoji: '🐟' },
                { word: 'bird', emoji: '🐦' },
                { word: 'tree', emoji: '🌳' },
                { word: 'ball', emoji: '⚽' },
                { word: 'book', emoji: '📖' },
                { word: 'cake', emoji: '🎂' },
                { word: 'bear', emoji: '🐻' },
                { word: 'frog', emoji: '🐸' },
                { word: 'moon', emoji: '🌙' },
                { word: 'bee', emoji: '🐝' },
                { word: 'car', emoji: '🚗' },
            ],
            medium: [
                { word: 'apple', emoji: '🍎' },
                { word: 'bunny', emoji: '🐰' },
                { word: 'flower', emoji: '🌸' },
                { word: 'house', emoji: '🏠' },
                { word: 'tiger', emoji: '🐯' },
                { word: 'pizza', emoji: '🍕' },
                { word: 'rocket', emoji: '🚀' },
                { word: 'banana', emoji: '🍌' },
                { word: 'castle', emoji: '🏰' },
                { word: 'dragon', emoji: '🐉' },
                { word: 'guitar', emoji: '🎸' },
                { word: 'planet', emoji: '🪐' },
                { word: 'turtle', emoji: '🐢' },
                { word: 'monkey', emoji: '🐵' },
                { word: 'pencil', emoji: '✏️' },
            ],
            hard: [
                { word: 'rainbow', emoji: '🌈' },
                { word: 'elephant', emoji: '🐘' },
                { word: 'butterfly', emoji: '🦋' },
                { word: 'dinosaur', emoji: '🦕' },
                { word: 'treasure', emoji: '💎' },
                { word: 'princess', emoji: '👸' },
                { word: 'unicorn', emoji: '🦄' },
                { word: 'airplane', emoji: '✈️' },
                { word: 'sandwich', emoji: '🥪' },
                { word: 'computer', emoji: '💻' },
                { word: 'mountain', emoji: '⛰️' },
                { word: 'waterfall', emoji: '💦' },
                { word: 'umbrella', emoji: '☂️' },
                { word: 'sunshine', emoji: '🌞' },
                { word: 'firework', emoji: '🎆' },
            ]
        };

        let gameMode = 'single';
        let currentDifficulty = 'easy';
        let currentWords = [];
        let currentWord = null;
        let score = 0;
        let streak = 0;
        let level = 1;
        let wordsCompleted = 0;
        let userAnswer = [];
        let availableLetters = [];

        // Two player mode variables
        let currentPlayer = 'charlie';
        let charlieScore = 0;
        let graysonScore = 0;
        let charlieWords = 0;
        let graysonWords = 0;
        let roundsPlayed = 0;
        const totalRounds = 10;

        function chooseMode(mode) {
            gameMode = mode;
            document.getElementById('modeScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }

        function startGame(difficulty) {
            currentDifficulty = difficulty;
            currentWords = [...wordLists[difficulty]];
            shuffleArray(currentWords);

            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');

            if (gameMode === 'two') {
                document.getElementById('singlePlayerStats').classList.add('hidden');
                document.getElementById('twoPlayerStats').classList.remove('hidden');
                document.getElementById('turnIndicator').classList.remove('hidden');
                currentPlayer = 'charlie';
                charlieScore = 0;
                graysonScore = 0;
                charlieWords = 0;
                graysonWords = 0;
                roundsPlayed = 0;
                updateTurnIndicator();
                updateTwoPlayerStats();
            } else {
                document.getElementById('singlePlayerStats').classList.remove('hidden');
                document.getElementById('twoPlayerStats').classList.add('hidden');
                document.getElementById('turnIndicator').classList.add('hidden');
                resetStats();
            }

            nextWord();
        }

        function resetStats() {
            score = 0;
            streak = 0;
            level = 1;
            wordsCompleted = 0;
            updateStats();
        }

        function resetGame() {
            document.getElementById('modeScreen').classList.remove('hidden');
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('gameOverScreen').classList.add('hidden');
        }

        function updateTurnIndicator() {
            const indicator = document.getElementById('turnIndicator');
            const charlieCard = document.getElementById('charlieCard');
            const graysonCard = document.getElementById('graysonCard');

            if (currentPlayer === 'charlie') {
                indicator.textContent = "🦸 Charlie's Turn!";
                indicator.style.color = '#667eea';
                charlieCard.classList.add('active');
                graysonCard.classList.remove('active');
            } else {
                indicator.textContent = "🚀 Grayson's Turn!";
                indicator.style.color = '#f5576c';
                graysonCard.classList.add('active');
                charlieCard.classList.remove('active');
            }
        }

        function updateTwoPlayerStats() {
            document.getElementById('charlieScore').textContent = charlieScore;
            document.getElementById('graysonScore').textContent = graysonScore;
            document.getElementById('charlieWords').textContent = charlieWords;
            document.getElementById('graysonWords').textContent = graysonWords;
        }

        function switchPlayer() {
            currentPlayer = currentPlayer === 'charlie' ? 'grayson' : 'charlie';
            updateTurnIndicator();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function nextWord() {
            if (currentWords.length === 0) {
                currentWords = [...wordLists[currentDifficulty]];
                shuffleArray(currentWords);
                level++;
                updateStats();
            }

            currentWord = currentWords.pop();
            userAnswer = [];

            document.getElementById('wordImage').textContent = currentWord.emoji;
            document.getElementById('wordDisplay').textContent = 'Spell the word!';
            document.getElementById('feedback').textContent = '';
            document.getElementById('feedback').className = 'feedback';
            document.getElementById('nextBtn').classList.add('hidden');

            createLetterInputs();
            createLetterButtons();
            speak();
        }

        function createLetterInputs() {
            const container = document.getElementById('letterInput');
            container.innerHTML = '';

            for (let i = 0; i < currentWord.word.length; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'letter-box';
                input.maxLength = 1;
                input.dataset.index = i;
                input.addEventListener('input', handleLetterInput);
                input.addEventListener('keydown', handleKeyDown);
                container.appendChild(input);
            }

            container.firstChild.focus();
        }

        function createLetterButtons() {
            const container = document.getElementById('letterButtons');
            container.innerHTML = '';

            // Create a pool of letters: correct letters + some random ones
            const letters = currentWord.word.split('');
            const extraLetters = 'abcdefghijklmnopqrstuvwxyz'
                .split('')
                .filter(l => !letters.includes(l))
                .sort(() => Math.random() - 0.5)
                .slice(0, Math.max(5, Math.floor(currentWord.word.length / 2)));

            availableLetters = [...letters, ...extraLetters];
            shuffleArray(availableLetters);

            availableLetters.forEach(letter => {
                const btn = document.createElement('button');
                btn.className = 'letter-btn';
                btn.textContent = letter.toUpperCase();
                btn.dataset.letter = letter;
                btn.onclick = () => selectLetter(letter, btn);
                container.appendChild(btn);
            });
        }

        function selectLetter(letter, btn) {
            const inputs = document.querySelectorAll('.letter-box');
            const emptyInput = Array.from(inputs).find(input => !input.value);

            if (emptyInput) {
                emptyInput.value = letter.toUpperCase();
                btn.disabled = true;
                userAnswer.push(letter);

                const nextInput = inputs[parseInt(emptyInput.dataset.index) + 1];
                if (nextInput) {
                    nextInput.focus();
                }
            }
        }

        function handleLetterInput(e) {
            const input = e.target;
            const index = parseInt(input.dataset.index);
            const inputs = document.querySelectorAll('.letter-box');

            if (input.value && index < inputs.length - 1) {
                inputs[index + 1].focus();
            }
        }

        function handleKeyDown(e) {
            const input = e.target;
            const index = parseInt(input.dataset.index);
            const inputs = document.querySelectorAll('.letter-box');

            if (e.key === 'Backspace' && !input.value && index > 0) {
                inputs[index - 1].focus();
            } else if (e.key === 'Enter') {
                checkAnswer();
            }
        }

        function checkAnswer() {
            const inputs = document.querySelectorAll('.letter-box');
            const answer = Array.from(inputs).map(input => input.value.toLowerCase()).join('');
            const feedback = document.getElementById('feedback');

            if (answer.length !== currentWord.word.length) {
                feedback.textContent = 'Fill in all the letters! 📝';
                feedback.className = 'feedback';
                playSound('error');
                return;
            }

            if (answer === currentWord.word) {
                if (gameMode === 'two') {
                    const playerName = currentPlayer === 'charlie' ? 'Charlie' : 'Grayson';
                    feedback.textContent = `🎉 ${playerName} got it right! 🎉`;
                    feedback.className = 'feedback correct';

                    if (currentPlayer === 'charlie') {
                        charlieScore += 10;
                        charlieWords++;
                    } else {
                        graysonScore += 10;
                        graysonWords++;
                    }

                    updateTwoPlayerStats();
                    playSound('success');
                    celebrate();

                    roundsPlayed++;

                    if (roundsPlayed >= totalRounds) {
                        setTimeout(() => {
                            showGameOver();
                        }, 2000);
                    } else {
                        switchPlayer();
                        document.getElementById('nextBtn').classList.remove('hidden');
                    }
                } else {
                    feedback.textContent = '🎉 Correct! Great job! 🎉';
                    feedback.className = 'feedback correct';

                    score += 10 * (streak + 1);
                    streak++;
                    wordsCompleted++;

                    updateStats();
                    playSound('success');
                    celebrate();

                    document.getElementById('nextBtn').classList.remove('hidden');
                }
            } else {
                if (gameMode === 'two') {
                    const playerName = currentPlayer === 'charlie' ? 'Charlie' : 'Grayson';
                    feedback.textContent = `❌ Not quite ${playerName}! Try again! ❌`;
                    feedback.className = 'feedback incorrect';
                } else {
                    feedback.textContent = '❌ Not quite! Try again! ❌';
                    feedback.className = 'feedback incorrect';
                    streak = 0;
                    updateStats();
                }

                playSound('error');

                // Clear inputs and reset buttons
                inputs.forEach(input => input.value = '');
                const buttons = document.querySelectorAll('.letter-btn');
                buttons.forEach(btn => btn.disabled = false);
                inputs[0].focus();
            }
        }

        function showGameOver() {
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('gameOverScreen').classList.remove('hidden');

            document.getElementById('charlieFinalScore').textContent = charlieScore;
            document.getElementById('graysonFinalScore').textContent = graysonScore;
            document.getElementById('charlieFinalWords').textContent = charlieWords;
            document.getElementById('graysonFinalWords').textContent = graysonWords;

            const winnerDisplay = document.getElementById('winnerDisplay');

            if (charlieScore > graysonScore) {
                winnerDisplay.textContent = '🦸 Charlie Wins! 🏆';
            } else if (graysonScore > charlieScore) {
                winnerDisplay.textContent = '🚀 Grayson Wins! 🏆';
            } else {
                winnerDisplay.textContent = "🤝 It's a Tie! 🎉";
            }

            celebrate();
        }

        function updateStats() {
            if (gameMode === 'single') {
                document.getElementById('score').textContent = score;
                document.getElementById('streak').textContent = streak;
                document.getElementById('level').textContent = level;

                const progress = (wordsCompleted % 10) * 10;
                const progressFill = document.getElementById('progressFill');
                progressFill.style.width = progress + '%';
                progressFill.textContent = `${wordsCompleted % 10}/10`;
            } else {
                const progress = (roundsPlayed / totalRounds) * 100;
                const progressFill = document.getElementById('progressFill');
                progressFill.style.width = progress + '%';
                progressFill.textContent = `Round ${roundsPlayed}/${totalRounds}`;
            }
        }

        function speak() {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(currentWord.word);
                utterance.rate = 0.8;
                utterance.pitch = 1.2;
                speechSynthesis.speak(utterance);
            }
        }

        function playSound(type) {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            if (type === 'success') {
                oscillator.frequency.value = 523.25; // C5
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } else if (type === 'error') {
                oscillator.frequency.value = 220; // A3
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            }
        }

        function celebrate() {
            const celebration = document.getElementById('celebration');
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];

            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    celebration.appendChild(confetti);

                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }
    </script>
</body>
</html>
